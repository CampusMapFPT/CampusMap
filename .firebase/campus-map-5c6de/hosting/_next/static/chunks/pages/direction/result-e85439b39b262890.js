(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{1693:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/direction/result",function(){return e(1687)}])},8634:function(n,t){"use strict";t.Z={src:"/_next/static/media/destination.2c489476.png",height:25,width:25,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAXUlEQVR42g3HMQrCMAAAwDMOOugognVwcRBFCaiTthBoU9IH9P8/aYYbjrdBskUARkV2BQT6mtYJFxvU/n2xU/x0kCTRUdb5cHDz0Gskayiiu3M1CVY0openbLZnAU2+CT7nJwTGAAAAAElFTkSuQmCC"}},5424:function(n,t){"use strict";t.Z={src:"/_next/static/media/location.bbeb116d.png",height:25,width:25,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAVElEQVR42g3HSwqDMBRA0dMOOmz30BRCUcEPaBJB3IT734qPCwcuUBWbApD1fpLBH5glW5TMwOhrsoQj8HCA0xNeskuvC3OcYkWzY1V5K5ojqprPDQ5vCJ1aG5SrAAAAAElFTkSuQmCC"}},104:function(n,t,e){"use strict";var i=e(5893),o=e(9876),a=e(8527),r=e(5113),c=e(1163);t.Z=function(n){var t=n.title,e=(0,c.useRouter)();return(0,i.jsxs)(a.kC,{bgColor:"#3A88EC",height:"6rem",alignItems:"center",gap:3,pl:"1rem",children:[(0,i.jsx)(r.hU,{onClick:function(){return e.back()},bgColor:"transparent","aria-label":"back",icon:(0,i.jsx)(o.Rp,{color:"white",boxSize:5})}),(0,i.jsx)(a.xv,{textColor:"white",fontSize:"24px",lineHeight:"34px",children:t})]})}},829:function(n,t,e){"use strict";var i=e(4051),o=e.n(i),a=e(7294),r=e(9669),c=e.n(r);function s(n,t,e,i,o,a,r){try{var c=n[a](r),s=c.value}catch(u){return void e(u)}c.done?t(s):Promise.resolve(s).then(i,o)}function u(n){return function(){var t=this,e=arguments;return new Promise((function(i,o){var a=n.apply(t,e);function r(n){s(a,i,o,r,c,"next",n)}function c(n){s(a,i,o,r,c,"throw",n)}r(void 0)}))}}t.Z=function(n){var t=(0,a.useState)([]),e=t[0],i=t[1],r=(0,a.useState)(!0),s=r[0],l=r[1],d=(0,a.useState)(!1),g=d[0],x=d[1];return(0,a.useEffect)((function(){var t=c().CancelToken.source();function e(){return(e=u(o().mark((function e(){var a,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().get(n,{cancelToken:t.token});case 3:a=e.sent,r=a&&a.data?a.data:[],i(r),l(!1),x(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),c().isCancel(e.t0)?console.log("Request canceled",e.t0.message):(x(!0),l(!1));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return setTimeout((function(){!function(){e.apply(this,arguments)}()}),3e3),function(){t.cancel("Operation was canceled by user.")}}),[n]),{data:e,isLoading:s,isError:g}}},4243:function(n,t,e){"use strict";var i=e(5500),o=e(7294);t.Z=function(){return(0,o.useContext)(i.k)}},1687:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return C}});var i=e(5893),o=e(1163),a=e(8527),r=e(4017),c=e(5113),s=e(4651),u=e(9876),l=e(7294),d=e(8043),g="/_next/static/media/student.b36cbb26.png",x=function(n){var t=(0,l.useState)(0),e=t[0],o=t[1],a=(0,l.useState)(1.5),r=a[0],c=a[1],s=n.locations;return(0,l.useEffect)((function(){e<s.length-1&&setTimeout((function(){o(e+1)}),1500)}),[e]),(0,l.useEffect)((function(){c(0),o(0),setTimeout((function(){c(1.5)}),1)}),[n.locations]),(0,i.jsx)(d.E.img,{className:"moving-student",src:g,initial:s&&{top:"".concat(s[0].location.yRenderValue,"%"),left:"".concat(s[0].location.xRenderValue,"%")},animate:s[e]&&{top:"".concat(s[e].location.yRenderValue,"%"),left:"".concat(s[e].location.xRenderValue,"%")},transition:{duration:r,ease:"linear"}})},p=e(5424),f=e(8634),h=e(829),A=e(4243),m={hidden:{pathLength:0,opacity:0},visible:function(n){var t=1+.5*n;return{pathLength:1,opacity:1,transition:{pathLength:{delay:t,type:"spring",duration:1.5,bounce:0},opacity:{delay:t,duration:.01}}}}},v=function(n){var t=n.locations,e=(0,l.useState)(""),o=e[0],a=e[1];return(0,l.useEffect)((function(){a(t.reduce((function(n,t,e){var i=n.concat("".concat(t.location.xRenderValue,",").concat(t.location.yRenderValue," "));return 0==e?"M".concat(i):i}),""))}),[n]),(0,i.jsx)(d.E.svg,{viewBox:"0 0 100 100",initial:"hidden",animate:"visible",preserveAspectRatio:"none",children:(0,i.jsx)(d.E.path,{d:o,stroke:"#0099ff",variants:m})})},j=function(n){var t,o,d=(0,A.Z)(),g=(0,l.useState)(null),m=g[0],j=g[1],b=(0,l.useState)(0),C=b[0],k=b[1],E=(0,l.useState)(0),w=E[0],y=E[1],R=(0,l.useState)(!0),S=(R[0],R[1],(0,h.Z)("".concat("https://campusmapapi.azurewebsites.net/api/Room/direction","?fromLocationId=").concat(d.directionFrom.id,"&toLocationId=").concat(d.directionTo.id))),T=S.data,B=S.isLoading,F=(S.isError,T.result||[]),U=(t=F,o="floor",Object.values(t.reduce((function(n,t){return n[t[o]]||(n[t[o]]=[]),n[t[o]].push(t),n}),{})));console.log("directionLocation",U),console.log("globalContext",d);var N=U[C];(0,l.useEffect)((function(){null!==N&&void 0!==N&&y(N[0].floor)}),[N]);var _;return _="tang".concat(w,".png"),e(8769)("./".concat(_)).then((function(n){j(n.default)})),(0,i.jsxs)(a.xu,{className:"map",children:[(0,i.jsxs)(a.Kq,{px:8,mt:6,gap:1,children:[(0,i.jsx)(r.v2,{children:(0,i.jsx)(r.j2,{as:c.zx,bgColor:"#FFDD69",height:"50px",borderRadius:15,textAlign:"left",children:(0,i.jsxs)(a.kC,{children:[(0,i.jsx)(s.Ee,{src:p.Z.src,display:"block",p:"4"}),(0,i.jsx)(a.xu,{opacity:.5,fontSize:15,p:"1",alignSelf:"center",children:d.directionFrom.name})]})})}),(0,i.jsx)(r.v2,{children:(0,i.jsx)(r.j2,{as:c.zx,bgColor:"#FFDD69",height:"50px",borderRadius:15,textAlign:"left",children:(0,i.jsxs)(a.kC,{children:[(0,i.jsx)(s.Ee,{src:f.Z.src,display:"block",p:"4"}),(0,i.jsx)(a.xu,{opacity:.5,fontSize:15,p:"1",alignSelf:"center",children:d.directionTo.name})]})})})]}),(0,i.jsxs)(a.xu,{margin:"40px auto 20px",className:"MapImageContainer",children:[m&&(0,i.jsx)(s.Ee,{src:m.src,alt:"Tang".concat(w),className:"MapImage"}),N&&N.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x,{locations:N}),(0,i.jsx)(v,{locations:N},C)]})]}),(0,i.jsxs)(a.xu,{borderWidth:"6px 0 0 0",mt:6,borderTopColor:"#BAD8FF",className:"instruction-container",children:[(0,i.jsx)(c.hU,{className:"nextFloorBtn","aria-label":"Next Floor",variant:"ghost",onClick:function(){C<U.length-1&&k(C+1)},icon:(0,i.jsx)(u.XC,{})}),(0,i.jsx)(c.hU,{className:"prevFloorBtn","aria-label":"Previous Floor",variant:"ghost",onClick:function(){C>0&&k(C-1)},icon:(0,i.jsx)(u.wy,{})}),(0,i.jsx)(a.xu,{fontSize:"4xl",margin:"auto 0",textAlign:"center",children:"Instruction"}),(0,i.jsxs)(a.xu,{margin:"0 20px",children:[B&&(0,i.jsx)(a.xv,{px:8,children:"\u0110ang t\u1ea3i..."}),(0,i.jsx)(a.GS,{children:N&&N.length>0&&N.map((function(n){return(0,i.jsx)(i.Fragment,{children:n.directionGuide&&(0,i.jsx)(a.HC,{children:(0,i.jsx)(a.xv,{children:n.directionGuide})},n.location.id)})}))})]})]})]})},b=e(104),C=function(){var n=(0,o.useRouter)();return console.log("query",n.query),(0,i.jsxs)(a.xu,{maxW:"mobile",h:"812px",padding:"0",fontFamily:"campus",children:[(0,i.jsx)(b.Z,{title:"Home"}),(0,i.jsx)(j,{locationQuery:n.query})]})}},8769:function(n,t,e){var i={"./tang0.png":[3636,636],"./tang1.png":[3490,490],"./tang2.png":[2671,671],"./tang3.png":[9689,689],"./tang4.png":[5718,718],"./tang5.png":[4273,273],"./tang6.png":[6666,666],"./tang7.png":[8214,659],"./tang8.png":[4869,869],"./tang9.png":[7699,699]};function o(n){if(!e.o(i,n))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[n],o=t[0];return e.e(t[1]).then((function(){return e(o)}))}o.keys=function(){return Object.keys(i)},o.id=8769,n.exports=o}},function(n){n.O(0,[920,876,921,669,774,888,179],(function(){return t=1693,n(n.s=t);var t}));var t=n.O();_N_E=t}]);